app.controller("memberCtrl",["$scope","_jiyin","dataToURL",function(t,e,a){t.memberList={},t.inputPage=1,t.upload=function(){$("#upload").modal("show")},t.ok=function(){$("#upload").modal("hide")},t.$on("memberList",function(e,a){t.memberList=a}),t.$on("totalPage",function(e,a){t.totalPage=a}),t.getData=function(){e.dataPost("admin/user_admin/get_page_info/",a({page:t.inputPage})).then(function(e){t.memberList=e.data,t.totalPage=e.total_page})},t.getData(),t.addList=function(){t.title="增加数据",e.modal({tempUrl:"/source/admin/tpl/modal/modal-userInfo.html",tempCtrl:"modalUserCtrl",ok:t.add,size:"lg",params:{title:t.title,infoList:{},ael:"add"}})},t.add=function(n){e.dataPost("admin/user_admin/add_info",a(n)).then(function(a){1==a.success?(e.msg("s",a.msg),t.getData()):e.msg("e",a.error)})},t.editList=function(a){t.title="编辑数据",e.modal({tempUrl:"/source/admin/tpl/modal/modal-userInfo.html",tempCtrl:"modalUserCtrl",ok:t.edit,size:"lg",params:{title:t.title,infoList:a,ael:"edit"}})},t.edit=function(n){e.dataPost("admin/user_admin/update_info",a(n)).then(function(a){1==a.success?(e.msg("s",a.msg),t.getData()):e.msg("e",a.error)})},t.deleteData=function(n){confirm("确认删除这条数据吗?")&&e.dataPost("admin/user_admin/soft_delete",a({id:n.id})).then(function(){e.msg("s","删除成功"),t.getData()})},t.nextPage=function(){t.inputPage<t.totalPage?(t.inputPage++,t.getData()):e.msg("e","当前是最后一页")},t.previousPage=function(){t.inputPage>1?(t.inputPage--,t.getData()):e.msg("e","当前是第一页")},t.firstPage=function(){t.inputPage=1,t.getData()},t.lastPage=function(){t.inputPage=t.totalPage,t.getData()},t.selectPage=function(e){t.inputPage=e,t.getData()}}]),app.controller("memberFileUploadCtrl",["$scope","FileUploader","_jiyin","dataToURL",function(t,e,a,n){var o=t.uploader=new e({url:SITE_URL+"admin/user_admin/batch_up_user_data"});o.filters.push({name:"customFilter",fn:function(){return this.queue.length<2}}),t.upload=function(t){return o.queue.length>1?void a.msg("e","只能上传一个文件"):void t.upload()},t.uploadAll=function(){return o.queue.length>1?void a.msg("e","只能上传一个文件"):void angular.forEach(o.queue,function(t){t.upload()})},o.onSuccessItem=function(e,o){1==o.success?(a.msg("s",o.msg),angular.forEach(o.error,function(t){a.msg("e",t)}),a.dataPost("admin/user_admin/get_page_info/",n({page:1})).then(function(e){t.$emit("memberList",e.data),t.$emit("totalPage",e.total_page)})):a.msg("e",o.msg)},t.$on("clearQueue",function(){o.clearQueue()})}]);