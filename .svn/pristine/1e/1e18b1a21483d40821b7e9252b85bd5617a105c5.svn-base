app.factory("dataToURL",function(){return function(e){if(e instanceof Object)for(var t in e)e.hasOwnProperty(t)&&("undefined"==typeof e[t]||!e[t]&&"undefined"!=typeof e[t]&&0!=e[t])&&(e[t]="");var r="";for(var o in e)r+="&"+o+"="+e[o];return r.slice(1,r.length)}}),app.factory("_jiyin",["$http","$q","toaster","$modal","$rootScope",function(e,t,r,o){var n={};return n.fileMd5=function(e){var r=t.defer(),o=new FileReader,n=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice,a=2097152,i=Math.ceil(e.size/a),s=0,c=new SparkMD5;o.onload=function(t){if(c.appendBinary(t.target.result),s++,i>s)p();else{var o=c.end();r.resolve({md5Code:o,file:e})}};var p=function(){var t=s*a,r=t+a>=e.size?e.size:t+a;o.readAsBinaryString(n.call(e,t,r))};return p(),r.promise},n.msg=function(e,t){var o={s:"success",i:"info",wt:"wait",w:"warning",e:"error"}[e];o=o?o:"success",t=t||"",r.pop(o,"信息提示",t)},n.dataGet=function(r,o){var n=t.defer();return e({method:"GET",contentType:"application/json",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8;","X-Requested-With":"XMLHttpRequest"},dataType:"json",data:o,url:SITE_URL+r}).success(function(e){n.resolve(e)}).error(function(e){console.log(e.data),n.reject("Error!")}),n.promise},n.dataPost=function(r,o){var n=t.defer();return e({method:"POST",contentType:"application/json",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8;","X-Requested-With":"XMLHttpRequest"},dataType:"json",data:o,url:SITE_URL+r}).success(function(e){n.resolve(e)}).error(function(e){console.log(e.data),n.reject("Error!")}),n.promise},n.modal=function(e){var t=e.type,r=e.size||"",n="",a="";if(void 0==t&&void 0!=e.tempUrl&&(n=e.tempUrl,a=e.tempCtrl),""==n||""==a)return void this.msg("e","未指定模板文件！");var i=o.open({templateUrl:n,controller:a,size:r,resolve:{params:function(){return e.params}}});i.result.then(e.ok,e.cancle)},n}]);