app.controller("discountCtrl",["$scope","_jiyin","dataToURL",function(t,a,e){t.discountList={},t.inputPage=1,t.getData=function(){a.dataGet("admin/commodity_admin/flash_sale_paginate/"+t.inputPage+"/10").then(function(a){t.discountList=a.data,t.totalPage=a.total_page})},t.getData(),t.addList=function(){t.title="增加数据",a.modal({tempUrl:"/source/admin/tpl/modal/modal-discount.html",tempCtrl:"modalDisCtrl",ok:t.add,size:"lg",params:{title:t.title,infoList:{},ael:"add"}})},t.add=function(i){a.dataPost("admin/commodity_admin/add_flash_sale",e(i)).then(function(e){1==e.success?(a.msg("s","添加成功"),t.getData()):a.msg("e","添加失败")})},t.editList=function(e){e.price=parseInt(e.price),t.title="编辑数据",a.modal({tempUrl:"/source/admin/tpl/modal/modal-discount.html",tempCtrl:"modalDisCtrl",ok:t.edit,size:"lg",params:{title:t.title,infoList:e,ael:"edit"}})},t.edit=function(i){a.dataPost("admin/commodity_admin/update_flash_sale",e(i)).then(function(e){1==e.success?(a.msg("s","修改成功"),t.getData()):a.msg("e","修改失败")})},t.deleteData=function(i){confirm("确认删除这条数据吗?")&&a.dataPost("admin/commodity_admin/delete_flash_sale",e({id:i.id})).then(function(){a.msg("s","删除成功"),t.getData()})},t.nextPage=function(){t.inputPage<t.totalPage?(t.inputPage++,t.getData()):a.msg("e","当前是最后一页")},t.previousPage=function(){t.inputPage>1?(t.inputPage--,t.getData()):a.msg("e","当前是第一页")},t.firstPage=function(){t.inputPage=1,t.getData()},t.lastPage=function(){t.inputPage=t.totalPage,t.getData()},t.selectPage=function(a){t.inputPage=a,t.getData()}}]);