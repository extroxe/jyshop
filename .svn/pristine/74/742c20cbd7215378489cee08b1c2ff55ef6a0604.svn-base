app.controller("prizeCtrl",["$scope","_jiyin","dataToURL",function(t,a,e){t.prizeList={},t.inputPage=1,t.totalPage=1,t.getParty=function(){a.dataGet("admin/sweepstakes_admin/get_sweepstakes_info").then(function(a){t.partyList=a.data})},t.getParty(),t.getCommo=function(){a.dataPost("admin/commodity_admin/get_all_commodity_by_is_point",e({is_point:1})).then(function(a){t.commoList=a.data})},t.getCommo(),t.getData=function(){a.dataGet("admin/sweepstakes_commodity_admin/get_sweepstakes_commodity").then(function(a){t.prizeList=a.data})},t.getData(),t.addInfo=function(){t.title="增加数据",t.add=!0,t.list={},$("#partyModal").modal("show")},t.editList=function(a){t.title="编辑数据",t.add=!1,t.list=a,$("#partyModal").modal("show")},t.ok=function(){return t.list.sweepstakes_id&&t.list.total_number?void(1==t.add?a.dataPost("admin/sweepstakes_commodity_admin/add",e(t.list)).then(function(e){1==e.success?(a.msg("s","添加成功"),t.getData(),$("#partyModal").modal("hide")):a.msg("e",e.msg)}):0==t.add&&a.dataPost("admin/sweepstakes_commodity_admin/update",e(t.list)).then(function(e){1==e.success?(a.msg("s","修改成功"),t.getData(),$("#partyModal").modal("hide")):a.msg("e",e.msg)})):void a.msg("e","带*号为必填，请先填写必填项")},t.deleteData=function(i){confirm("确认删除这条数据吗?")&&a.dataPost("admin/sweepstakes_commodity_admin/delete",e({id:i.id})).then(function(e){1==e.success?(a.msg("s","删除成功"),t.getData()):a.msg("e",e.msg)})},t.nextPage=function(){t.inputPage<t.totalPage?(t.inputPage++,t.getData()):a.msg("e","当前是最后一页")},t.previousPage=function(){t.inputPage>1?(t.inputPage--,t.getData()):a.msg("e","当前是第一页")},t.firstPage=function(){t.inputPage=1,t.getData()},t.lastPage=function(){t.inputPage=t.totalPage,t.getData()},t.selectPage=function(a){t.inputPage=a,t.getData()}}]);